<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solo Bermuda Tournament</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  background:#020617;
  color:#e2e8f0;
  font-family:Arial;
}
header{
  text-align:center;
  padding:14px;
  background:#0f172a;
  border-bottom:2px solid #1e293b;
}
header h1{margin:0;font-size:22px;color:#38bdf8;}
header p{margin:2px;font-size:12px;color:#94a3b8;}
.container{width:92%;max-width:900px;margin:auto;padding:12px;}

.card{
  background:#0f172a;
  margin-bottom:12px;
  padding:15px;
  border-radius:10px;
  box-shadow:0 0 12px rgba(0,0,0,.4);
  border:1px solid #1e293b;
}

h2{margin:0 0 10px;color:#38bdf8;font-size:18px;}

input{
  width:100%;
  background:#020617;
  border:1px solid #334155;
  padding:8px;
  color:white;
  border-radius:6px;
  margin-bottom:8px;
}

button{
  width:100%;
  padding:10px;
  border:none;
  font-weight:bold;
  border-radius:6px;
  cursor:pointer;
  font-size:15px;
}

.btn-green{background:#22c55e;color:#022c22;}
.btn-blue{background:#3b82f6;color:white;}
.btn-red{background:#dc2626;color:white;}
.btn-grey{background:#475569;color:white;}

table{
  width:100%;margin-top:10px;border-collapse:collapse;font-size:12px;
}
th,td{
  border:1px solid #1e293b;padding:6px;text-align:center;
}
th{background:#020617;}

.status-paid{background:#16a34a;color:white;border:none;padding:5px;}
.status-pending{background:#f97316;color:white;border:none;padding:5px;}

.rank1{background:#fde047;color:#111827;font-weight:bold;}
.rank2{background:#cbd5e1;color:#111827;font-weight:bold;}
.rank3{background:#fca5a5;color:#111827;font-weight:bold;}

  *{
  box-sizing: border-box;
  }
</style>
</head>
<body>

<header>
  <h1>Solo Bermuda Tournament</h1>
  <p>Entry ‚Çπ25 ‚Ä¢ Prize ‚Çπ150 ‚Ä¢ Kill ‚Çπ6</p>
</header>

<div class="container">

<!-- REGISTRATION -->
<div class="card">
  <h2>Register & Pay üéÆ</h2>
  <input id="name" placeholder="Free Fire Name">
  <input id="uid" placeholder="UID">
  <input id="wa" placeholder="WhatsApp Number">

  <button class="btn-green" onclick="registerPlayer()">Pay & Register</button>
  <p style="font-size:11px;color:#94a3b8;">UPI ID: <b style="color:#22c55e;">aryangaming603-2@okicici</b></p>
  <p style="font-size:11px;color:#64748b;">Normal users cannot see other's details ‚Äî secured view.</p>
</div>

<!-- PLAYER LIST -->
<div class="card">
  <h2>Registered Players ‚úî</h2>
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>UID</th>
        <th>Whatsapp</th>
        <th>Code</th>
        <th>Status/Actions</th>
      </tr>
    </thead>
    <tbody id="list"></tbody>
  </table>
</div>

<!-- LEADERBOARD -->
<div class="card">
  <h2>Match Leaderboard üèÜ</h2>

  <div id="adminBox" style="display:none;">
    <input id="lbName" placeholder="Player Name">
    <input id="lbKill" type="number" placeholder="Kills">
    <button class="btn-blue" onclick="addLB()">ADD RESULT</button>
    <button class="btn-grey" style="margin-top:6px;" onclick="clearLB()">RESET LEADERBOARD</button>
  </div>

  <table>
    <thead>
      <tr><th>Rank</th><th>Name</th><th>Kills</th><th>Prize</th></tr>
    </thead>
    <tbody id="lb"></tbody>
  </table>
  <p id="notify" style="font-size:11px;color:#94a3b8;text-align:center;"></p>
</div>

</div>

<script>
//== ADMIN CHECK
const admin = location.search.includes("admin=1");

//== Player Storage
let P = JSON.parse(localStorage.getItem("players") || "[]");
let L = JSON.parse(localStorage.getItem("leader") || "[]");

function registerPlayer(){
 let n=name.value.trim(), u=uid.value.trim(), w=wa.value.trim();
 if(!n||!u||!w) return alert("Fill all fields!");

 let code="FF"+Math.floor(100000+Math.random()*900000);

 P.push({name:n,uid:u,wa:w,code,status:"PENDING"});
 localStorage.setItem("players",JSON.stringify(P));

 let upi=`upi://pay?pa=aryangaming603-2@okicici&pn=AryanGaming&am=25&cu=INR&tn=${code}`;
 alert("Payment Note Code : "+code);
 location.href=upi;
 render();
}

//== TABLE RENDER
function render(){
 let h="";
 P.forEach((p,i)=>{
  let status = admin
      ? `<button class="${p.status=='PAID'?'status-paid':'status-pending'}" onclick="toggle(${i})">${p.status}</button>
         <button class="btn-red" style="margin-top:5px;" onclick="rem(${i})">DELETE</button>`
      : p.status;

  h+=`
   <tr>
    <td>${i+1}</td>
    <td>${p.name}</td>
    <td>${admin?p.uid:'XXXXXXX'}</td>
    <td>${admin?p.wa:'XXXXXXXXXX'}</td>
    <td>${admin?p.code:'XXXXXX'}</td>
    <td>${status}</td>
   </tr>`;
 });
 list.innerHTML=h;
}

//== REMOVE PLAYER
function rem(i){
 if(!admin) return;
 if(confirm("Delete player?")) P.splice(i,1);
 localStorage.setItem("players",JSON.stringify(P));
 render();
}

//== STATUS CHANGE
function toggle(i){
 if(!admin) return;
 P[i].status=P[i].status=="PAID"?"PENDING":"PAID";
 localStorage.setItem("players",JSON.stringify(P));
 render();
}

//=============== LEADERBOARD ================
function addLB(){
 if(!admin) return;
 let n=lbName.value,k=parseInt(lbKill.value);
 if(!n||isNaN(k)) return alert("Name+Kills required");
 L.push({name:n,kills:k});
 localStorage.setItem("leader",JSON.stringify(L));
 lbName.value="";lbKill.value="";
 showLB();
}

function clearLB(){
 if(!admin) return;
 if(confirm("RESET leaderboard?")){L=[];localStorage.setItem("leader","[]");showLB();}
}

function showLB(){
 let sorted=[...L].sort((a,b)=>b.kills-a.kills);
 let html="";
 sorted.forEach((p,i)=>{
  let prize = (i==0?150:0)+(p.kills*6);
  html+=`
  <tr class="rank${i+1}">
   <td>${i+1}</td><td>${p.name}</td>
   <td>${p.kills}</td><td>‚Çπ${prize}</td>
  </tr>`;
 });
 lb.innerHTML=html;
}

// INIT
if(admin){adminBox.style.display="block";notify.innerHTML="ADMIN MODE ENABLED üîê";}
else notify.innerHTML="Public view only ‚Äì update possible only by admin üîí";

render();showLB();
</script>

</body>
</html>
