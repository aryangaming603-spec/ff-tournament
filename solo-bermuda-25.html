<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Solo ‚Äì Bermuda Tournament - Aryan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body{
      margin:0;
      font-family:Arial, sans-serif;
      background: radial-gradient(circle at top, #1f2937 0, #020617 55%, #000000 100%);
      color:#e5e7eb;
    }
    header{
      padding:14px 12px;
      text-align:center;
      background:rgba(2,6,23,0.96);
      box-shadow:0 0 8px rgba(0,0,0,0.7);
    }
    header h1{
      margin:0;
      font-size:20px;
    }
    header p{
      margin:3px 0;
      font-size:12px;
      color:#9ca3af;
    }
    .container{
      max-width:800px;
      margin:0 auto;
      padding:12px;
    }
    .card{
      background:rgba(2,6,23,0.96);
      border-radius:14px;
      padding:14px 12px;
      border:1px solid #1f2937;
      box-shadow:0 0 10px rgba(0,0,0,0.7);
      margin-bottom:12px;
    }
    h2{
      margin:0 0 8px;
      font-size:17px;
    }
    .badge{
      background:#1e293b;
      padding:5px 10px;
      border-radius:999px;
      font-size:11px;
      display:inline-block;
      margin:3px 3px 0 0;
    }
    p{margin:3px 0;font-size:13px;}
    .label{
      display:block;
      margin-top:8px;
      font-size:13px;
    }
    input{
      width:100%;
      padding:8px 9px;
      margin-top:3px;
      border-radius:6px;
      border:1px solid #334155;
      background:#020617;
      color:#e5e7eb;
      font-size:13px;
      box-sizing:border-box;
    }
    input::placeholder{color:#6b7280;}
    .btn{
      margin-top:12px;
      display:block;
      width:100%;
      padding:11px 0;
      border-radius:9px;
      border:none;
      background:#22c55e;
      color:#022c22;
      font-weight:bold;
      font-size:14px;
      text-align:center;
      cursor:pointer;
    }
    .btn:hover{filter:brightness(1.05);}
    .note{
      font-size:11px;
      color:#9ca3af;
      margin-top:5px;
    }
    table{
      width:100%;
      border-collapse:collapse;
      margin-top:8px;
      font-size:11px;
    }
    th,td{
      border:1px solid #1f2937;
      padding:4px 6px;
      text-align:left;
      word-break:break-all;
    }
    th{
      background:#020617;
      font-weight:600;
    }
    .status-btn{
      padding:3px 6px;
      border-radius:4px;
      border:none;
      font-size:10px;
      cursor:pointer;
    }
    .status-paid{
      background:#16a34a;
      color:#ecfdf5;
    }
    .status-pending{
      background:#f97316;
      color:#fffbeb;
    }
    .slots-text{
      font-size:12px;
      color:#a5b4fc;
      margin-top:6px;
    }
  </style>
</head>
<body>

<header>
  <h1>Solo ‚Äì Bermuda (‚Çπ25 Entry)</h1>
  <p>Custom Room ‚Ä¢ Organised by Aryan</p>
</header>

<div class="container">

  <!-- DETAILS -->
  <div class="card">
    <h2>Tournament Info ‚ö°</h2>
    <div>
      <span class="badge">Mode: Solo</span>
      <span class="badge">Map: Bermuda</span>
      <span class="badge" id="slotBadge">Slots: 48 Players</span>
    </div>

    <p style="margin-top:8px;">
      <b>Entry Fee:</b> ‚Çπ25 / Player<br>
      <b>Winner Prize:</b> ‚Çπ150<br>
      <b>Per Kill:</b> ‚Çπ6
    </p>

    <p>
      <b>Pay on UPI:</b>
      <span style="color:#4ade80;font-weight:bold;">aryangaming603-2@okicici</span>
    </p>

    <p class="slots-text" id="slotsInfoText">
      Filled: 0 / 48 | Left: 48
    </p>

    <p class="note">
      Payment ke time UPI note/remark me jo <b>Payment Code</b> milega, wahi likhna.  
      Payment Aryan khud UPI/SMS se verify karega.
    </p>
  </div>

  <!-- SIMPLE FORM -->
  <div class="card">
    <h2>Register & Pay üéÆ</h2>

    <label class="label">Free Fire Name</label>
    <input id="ffName" placeholder="Your Free Fire name">

    <label class="label">Free Fire UID</label>
    <input id="ffUid" placeholder="Your UID">

    <label class="label">WhatsApp Number</label>
    <input id="whatsapp" placeholder="For Room ID & updates">

    <button class="btn" onclick="payAndRegister()">Pay ‚Çπ25 & Register</button>

    <p class="note">
      Button dabate hi:
      <br>1) Tumhara naam list me add ho jayega (status <b>Pending</b>)
      <br>2) Ek <b>Payment Code</b> banega
      <br>3) UPI app open hogi payment ke liye
    </p>
  </div>

  <!-- PLAYERS LIST -->
  <div class="card">
    <h2>Registered Players ‚úî</h2>
    <p class="note">
      Yahan sirf registration save hota hai. Real payment tumhe UPI history / SMS se verify karna hoga.
      Status button par tap karke <b>Pending / Paid</b> change kar sakte ho.
    </p>

    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>UID</th>
          <th>WhatsApp</th>
          <th>Pay Code</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody id="playerList"></tbody>
    </table>
  </div>
<!-- ===================== SOLO KILL RESULT LEADERBOARD ===================== -->

<div class="card" style="margin-top:20px;">
  <h2>Solo Match Leaderboard üèÜ</h2>
  <p class="note">Leaderboard final kills ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§π‡•à ‚Äî ‡§∏‡§ø‡§∞‡•ç‡§´ organiser ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§</p>

  <!-- ADMIN INPUT (sirf admin link me ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ) -->
  <div id="lb-admin" style="display:none;margin-top:10px;">
    <input id="lb_name" placeholder="Player Name">
    <input id="lb_kill" type="number" placeholder="Kills">
    <button class="btn" onclick="lbAdd()">Add Result</button>
    <button class="btn btn-black" style="margin-top:6px;background:#64748b;" onclick="lbClear()">Reset Leaderboard</button>
  </div>

  <p id="lb_info" class="note"></p>

  <table style="margin-top:12px;">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Name</th>
        <th>Kills</th>
        <th>Reward</th>
      </tr>
    </thead>
    <tbody id="lb_table"></tbody>
  </table>
</div>
</div>
<script>
// BASIC CONFIG
const CONFIG = {
  TOTAL_SLOTS: 48,
  ENTRY_FEE: 25,
  UPI_ID: "aryangaming603-2@okicici"
};

// ‚úÖ agar URL me ?admin=1 hai to admin view ON
const IS_ADMIN_VIEW = window.location.search.includes("admin=1");

let players = [];
let count = 0;

// localStorage load
function loadFromStorage(){
  try{
    const data = localStorage.getItem("ffSoloPlayers");
    if(data){
      players = JSON.parse(data);
      count = players.length;
      renderTable();
      updateSlotsInfo();
    }
  }catch(e){
    console.warn(e);
  }
}

// save
function saveToStorage(){
  try{
    localStorage.setItem("ffSoloPlayers", JSON.stringify(players));
  }catch(e){
    console.warn(e);
  }
}

// payment code
function createCode(){
  const num = Math.floor(100000 + Math.random()*900000);
  return "FF" + num;
}

// MAIN SIMPLE FLOW
function payAndRegister(){
  const name = document.getElementById("ffName").value.trim();
  const uid  = document.getElementById("ffUid").value.trim();
  const wa   = document.getElementById("whatsapp").value.trim();

  if(!name || !uid || !wa){
    alert("Name, UID aur WhatsApp tino zaroori hai.");
    return;
  }

  if(players.length >= CONFIG.TOTAL_SLOTS){
    alert("All slots filled! Ab naya register nahi ho sakta.");
    return;
  }

  const code = createCode();

  // list me add
  count++;
  const player = {
    no: count,
    name,
    uid,
    wa,
    code,
    status: "Pending"
  };
  players.push(player);
  saveToStorage();
  renderTable();
  updateSlotsInfo();

  // form clear
  document.getElementById("ffName").value = "";
  document.getElementById("ffUid").value = "";
  document.getElementById("whatsapp").value = "";

  // user ko code dikhana
  alert("Your payment code: " + code + "\nUPI payment note me yehi code likhna.");

  // UPI deep link open
  const url = "upi://pay"
    + "?pa=" + encodeURIComponent(CONFIG.UPI_ID)
    + "&pn=" + encodeURIComponent("Aryan Gaming")
    + "&am=" + encodeURIComponent(CONFIG.ENTRY_FEE)
    + "&cu=INR"
    + "&tn=" + encodeURIComponent(code);

  window.location.href = url;
}

// table render
function renderTable(){
  const tbody = document.getElementById("playerList");
  tbody.innerHTML = "";
  players.forEach((p,i)=>{
    // ‚úÖ agar admin ho to button banao, warna sirf text
    const statusHtml = IS_ADMIN_VIEW
      ? `<button class="status-btn ${p.status === 'Paid' ? 'status-paid' : 'status-pending'}"
                  onclick="toggleStatus(${i})">
           ${p.status}
         </button>`
      : p.status;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${p.name}</td>
      <td>${p.uid}</td>
      <td>${p.wa}</td>
      <td>${p.code}</td>
      <td>${statusHtml}</td>
    `;
    tbody.appendChild(tr);
  });
}

// status toggle ‚Äì sirf admin view me chalega
function toggleStatus(i){
  if(!IS_ADMIN_VIEW){
    alert("Ye option sirf organiser ke liye hai.");
    return;
  }
  const p = players[i];
  p.status = (p.status === "Paid") ? "Pending" : "Paid";
  saveToStorage();
  renderTable();
}

// slots info
function updateSlotsInfo(){
  const filled = players.length;
  const left   = Math.max(CONFIG.TOTAL_SLOTS - filled, 0);
  const info   = document.getElementById("slotsInfoText");
  const badge  = document.getElementById("slotBadge");
  if(info){
    info.textContent = `Filled: ${filled} / ${CONFIG.TOTAL_SLOTS} | Left: ${left}`;
  }
  if(badge){
    badge.textContent = `Slots: ${CONFIG.TOTAL_SLOTS} Players`;
  }
}

document.addEventListener("DOMContentLoaded", ()=>{
  loadFromStorage();
  updateSlotsInfo();
});
</script>   
</body>
</html>
